<head>
    <title>
    {% if page.title == "Home" %}
        {{ site.title }} - {{ page.title }}
    {% else %}
        {% assign dlangref = false %}
        {% for tag in page.tags %}
            {% if tag == "dlangref" %}
                {% assign dlangref = true %}
            {% endif %}
        {% endfor %}
        {% if dlangref == true %}
            Guide to the D Programming Language - {{ page.chapter }}
        {% else %}
            {{ site.title }} - {{ page.title }}
        {% endif %}
    {% endif %}
    </title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
	<!-- <meta name="description" content="The Perfect 3 Column Liquid Layout: No CSS hacks. SEO friendly. iPhone compatible." /> -->
	<!--<meta name="keywords" content="The Perfect 3 Column Liquid Layout: No CSS hacks. SEO friendly. iPhone compatible." /> -->
    <meta name="description" content="Programming." />
	<meta name="keywords" content="cpp dlang programming" />
	<meta name="robots" content="index, follow" />
    <!-- <link href="http://fonts.googleapis.com/css?family==Muli:400,300,700,400italic" rel="stylesheet" type="text/css"> -->
    <link rel="stylesheet" href="{{ site.baseurl }}/css/styles.css">
    <link rel="stylesheet" href="{{ site.baseurl }}/css/pygment_trac.css">
    <!-- Override the default styles above -->
    <!-- <link rel="stylesheet" href="{{ site.baseurl }}/stylesheets/layout.css" media="screen" /> -->
    <link rel="stylesheet" href="{{ site.baseurl }}/css/overridestyles.css">
    <link rel="stylesheet" href="{{ site.baseurl }}/css/code.css">
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <!-- For search.json -->
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="{{ site.baseurl }}/javascripts/respond.js"></script>
    <!-- Load Google fonts asynchroneously -->
    <!-- Ref: http://haisum.github.io/2014/11/03/google-fonts-asynchroneous-loading/ -->
    <!--
    <script type="text/javascript">
        WebFontConfig = {
            google: { families: [ 'Muli:400,300,700,400italic:latin', 'Muli:400:latin' ] }
        };
        (function() {
            var wf = document.createElement('script');
            wf.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
            wf.type = 'text/javascript';
            wf.async = 'true';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(wf, s);
        })();
    </script>
    -->
    <!-- Randomize tidbits -->
    <!-- From http://thornelabs.net/2014/06/08/a-better-way-to-display-random-jekyll-posts-on-page-load-or-refresh-using-jquery-and-json.html -->
    <script type="text/javascript">
        function removeNL(s){
            return s.replace(/[\n\r\t]/g, ""); //replaces NewLine or CarriageReturn or Tab with empty string.
        }
        
        {% if dlangref == true %}
        
        function generateDlangCompilerReleases() {
            $.getJSON("/dlang_compiler_releases.json", function(data) {
                console.log("[dlang_compiler_releases.json loaded]");
                var postsCount = data.length;
                var posts = data;
                var counter = 0;
                
                var divContents = $("#compiler_releases");
                divContents.append('<h1>Compiler Releases</h1>');
                while (counter < postsCount) {
                    divContents.append("<p><b>" + posts[counter].release + "</b> &nbsp; " + posts[counter].title + "</p>");
                    divContents.append("&nbsp;&nbsp;&bull; <a href='" + posts[counter].download + "'>Download</a><br/>");
                    divContents.append("&nbsp;&nbsp;&bull; <a href='" + posts[counter].changelog + "'>Change Log</a><br/>");
                    divContents.append("<hr class='thin medium margin_top_15 darker'></hr>");
                    counter++;
                }
                divContents.append("<p>Query and report bugs <a href='https://issues.dlang.org'>here</a>.</p>")
            });
        }
        
        function generateDlangNews(maxPosts) {
            $.getJSON("/dlangnews.json", function(data) {
                console.log("[dlangnews.json loaded]");
                var postsCount = data.length;
                var posts = data;
                var counter = 0;
                var divDlangNews = $("#dlang_news");
                divDlangNews.append('<h1>Latest News</h1>');
                while (counter < postsCount) {
                    var content = posts[counter].content;
                    divDlangNews.append(content);
                    if (posts[counter].link != "") {
                        divDlangNews.append("<i><a href='" + posts[counter].link + "'>Link to details</a></i>");
                    }
                    counter++;
                    if (counter < postsCount) {
                        divDlangNews.append("<hr class='thin medium margin_top_15 darker'></hr>");
                    }
                }
            });
        }
        
        {% else %}
        
        function generateRandomPosts(maxPosts) {
            $.getJSON("/tidbit.json", function(data) {
                console.log("[tidbit.json loaded for random posts]");
                var postsCount = data.length;
                var posts = data;
                var randomIndexUsed = [];
                var counter = 0;
                var numberOfPosts = maxPosts;
                if (maxPosts == null || maxPosts == 0) {
                    numberOfPosts = 3;
                }
                if (postsCount < numberOfPosts) {
                    numberOfPosts = postsCount;
                }
                if (postsCount > 0) {
                    var divRandomPosts = $("#random_tidbits");
                    while (counter < numberOfPosts) {
                        var randomIndex = Math.floor(Math.random() * postsCount);
                        if (randomIndexUsed.indexOf(randomIndex) == "-1") {
                            var postTitle = posts[randomIndex].title;
                            var postHREF = posts[randomIndex].href;
                            var postType = posts[randomIndex].type;
                            var postBy = posts[randomIndex].by;
                            var postContent = posts[randomIndex].content;
                            
                            var line = $(document.createElement('div')).addClass('tidbit_entry');
                            
                            /* s = s + "<div class='tidbit_entry'>"; */
                            if (postType != "quote") {
                                line.append("<p><a href='" + postHREF + "'>" + postTitle + "</a></p>");
                            }
                            /* divRandomPosts.append('<p>' + postType + '</p>') */
                            if (postType == "quote") {
                                line.append(postContent + "<p class='qauthor'>&mdash; " + postBy + "</p>");
                            } else {
                                line.append(postContent);
                            }
                            /*
                            if (counter < (numberOfPosts - 1)) {
                                divRandomPosts.append("<hr class='thin'>");
                            }
                            */
                            
                            divRandomPosts.append(line);
                            randomIndexUsed.push(randomIndex);
                            counter++;
                        }
                    }
                }
            });
        }
        
       
        {% endif %}
        
        
        
        
        
        $(document).ready(function() {
            {% if dlangref == true %}
                generateDlangCompilerReleases();
                generateDlangNews();
            {% else %}
                generateRandomPosts();
            {% endif %}
        });
    </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="{{ site.baseurl }}/stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
</head>
